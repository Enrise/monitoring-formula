<?xml version="1.0" ?>
<zabbix_export>
   <version>4.4</version>
   <date>2020-01-28T11:58:26Z</date>
   <groups>
      <group>
         <name>Templates</name>
      </group>
   </groups>
   <templates>
      <template>
         <template>Template App Rabbitmq-Server</template>
         <name>Template App Rabbitmq</name>
         <groups>
            <group>
               <name>Templates</name>
            </group>
         </groups>
         <applications>
            <application>
               <name>RabbitMQ</name>
            </application>
         </applications>
         <items>
            <item>
               <name>RabbitMQ Status</name>
               <type>ZABBIX_ACTIVE</type>
               <key>net.tcp.port[127.0.0.1,5672]</key>
               <delay>2m</delay>
               <history>3d</history>
               <trends>60d</trends>
               <applications>
                  <application>
                     <name>RabbitMQ</name>
                  </application>
               </applications>
               <request_method>POST</request_method>
               <triggers>
                  <trigger>
                     <expression>{last(0)}=0</expression>
                     <name>RabbitMQ is down on {HOSTNAME}</name>
                     <priority>HIGH</priority>
                     <tags>
                        <tag>
                           <tag>service</tag>
                           <value>rabbitmq</value>
                        </tag>
                     </tags>
                  </trigger>
               </triggers>
            </item>
         </items>
         <discovery_rules>
            <discovery_rule>
               <name>RabbitMQ Count Queue and Exchanges</name>
               <type>ZABBIX_ACTIVE</type>
               <key>rabbitmq.discovery</key>
               <delay>30m</delay>
               <filter>
                  <conditions>
                     <condition>
                        <macro>{#NODENAME}</macro>
                        <formulaid>A</formulaid>
                     </condition>
                  </conditions>
               </filter>
               <item_prototypes>
                  <item_prototype>
                     <name>RabbitMQ exchanges count on $1 ($2)</name>
                     <type>ZABBIX_ACTIVE</type>
                     <key>rabbitmq[{#NODENAME},{#VHOSTNAME},list_exchanges,none]</key>
                     <delay>5m</delay>
                     <history>3d</history>
                     <trends>90d</trends>
                     <applications>
                        <application>
                           <name>RabbitMQ</name>
                        </application>
                     </applications>
                     <request_method>POST</request_method>
                  </item_prototype>
                  <item_prototype>
                     <name>RabbitMQ queue count on $1 ($2)</name>
                     <type>ZABBIX_ACTIVE</type>
                     <key>rabbitmq[{#NODENAME},{#VHOSTNAME},list_queues,none]</key>
                     <delay>5m</delay>
                     <history>3d</history>
                     <trends>90d</trends>
                     <applications>
                        <application>
                           <name>RabbitMQ</name>
                        </application>
                     </applications>
                     <request_method>POST</request_method>
                  </item_prototype>
               </item_prototypes>
               <graph_prototypes>
                  <graph_prototype>
                     <name>RabbitMQ exchanges/queue count on {#NODENAME} ({#VHOSTNAME})</name>
                     <graph_items>
                        <graph_item>
                           <color>00C800</color>
                           <item>
                              <host>Template App Rabbitmq-Server</host>
                              <key>rabbitmq[{#NODENAME},{#VHOSTNAME},list_exchanges,none]</key>
                           </item>
                        </graph_item>
                        <graph_item>
                           <sortorder>1</sortorder>
                           <color>C80000</color>
                           <item>
                              <host>Template App Rabbitmq-Server</host>
                              <key>rabbitmq[{#NODENAME},{#VHOSTNAME},list_queues,none]</key>
                           </item>
                        </graph_item>
                     </graph_items>
                  </graph_prototype>
               </graph_prototypes>
               <request_method>POST</request_method>
            </discovery_rule>
            <discovery_rule>
               <name>Rabbitmq Exchanges</name>
               <type>ZABBIX_ACTIVE</type>
               <key>rabbitmq.discovery_exchanges</key>
               <delay>30m</delay>
               <status>DISABLED</status>
               <filter>
                  <conditions>
                     <condition>
                        <macro>{#NODENAME}</macro>
                        <formulaid>A</formulaid>
                     </condition>
                  </conditions>
               </filter>
               <item_prototypes>
                  <item_prototype>
                     <name>RabbitMQ $3 $4 $1 ($2)</name>
                     <type>ZABBIX_ACTIVE</type>
                     <key>rabbitmq[{#NODENAME},{#VHOSTNAME},exchange_durable,{#EXCHANGENAME}]</key>
                     <delay>5m</delay>
                     <history>3d</history>
                     <trends>0</trends>
                     <value_type>TEXT</value_type>
                     <applications>
                        <application>
                           <name>RabbitMQ</name>
                        </application>
                     </applications>
                     <request_method>POST</request_method>
                  </item_prototype>
                  <item_prototype>
                     <name>RabbitMQ $3 $4 $1 ($2)</name>
                     <type>ZABBIX_ACTIVE</type>
                     <key>rabbitmq[{#NODENAME},{#VHOSTNAME},exchange_type,{#EXCHANGENAME}]</key>
                     <delay>5m</delay>
                     <history>3d</history>
                     <trends>0</trends>
                     <value_type>TEXT</value_type>
                     <applications>
                        <application>
                           <name>RabbitMQ</name>
                        </application>
                     </applications>
                     <request_method>POST</request_method>
                  </item_prototype>
               </item_prototypes>
               <request_method>POST</request_method>
            </discovery_rule>
            <discovery_rule>
               <name>Rabbitmq Queues</name>
               <type>ZABBIX_ACTIVE</type>
               <key>rabbitmq.discovery_queue</key>
               <delay>30m</delay>
               <filter>
                  <conditions>
                     <condition>
                        <macro>{#NODENAME}</macro>
                        <formulaid>A</formulaid>
                     </condition>
                  </conditions>
               </filter>
               <item_prototypes>
                  <item_prototype>
                     <name>RabbitMQ $3 $4 $1 ($2)</name>
                     <type>ZABBIX_ACTIVE</type>
                     <key>rabbitmq[{#NODENAME},{#VHOSTNAME},queue_consumers,{#QUEUENAME}]</key>
                     <delay>5m</delay>
                     <history>3d</history>
                     <trends>90d</trends>
                     <applications>
                        <application>
                           <name>RabbitMQ</name>
                        </application>
                     </applications>
                     <request_method>POST</request_method>
                  </item_prototype>
                  <item_prototype>
                     <name>RabbitMQ $3 $4 $1 ($2)</name>
                     <type>ZABBIX_ACTIVE</type>
                     <key>rabbitmq[{#NODENAME},{#VHOSTNAME},queue_durable,{#QUEUENAME}]</key>
                     <delay>5m</delay>
                     <history>3d</history>
                     <trends>0</trends>
                     <value_type>TEXT</value_type>
                     <applications>
                        <application>
                           <name>RabbitMQ</name>
                        </application>
                     </applications>
                     <request_method>POST</request_method>
                  </item_prototype>
                  <item_prototype>
                     <name>RabbitMQ $3 $4 $1 ($2)</name>
                     <type>ZABBIX_ACTIVE</type>
                     <key>rabbitmq[{#NODENAME},{#VHOSTNAME},queue_memory,{#QUEUENAME}]</key>
                     <delay>5m</delay>
                     <history>3d</history>
                     <trends>90d</trends>
                     <units>B</units>
                     <applications>
                        <application>
                           <name>RabbitMQ</name>
                        </application>
                     </applications>
                     <request_method>POST</request_method>
                  </item_prototype>
                  <item_prototype>
                     <name>RabbitMQ $3 $4 $1 ($2)</name>
                     <type>ZABBIX_ACTIVE</type>
                     <key>rabbitmq[{#NODENAME},{#VHOSTNAME},queue_msgs,{#QUEUENAME}]</key>
                     <delay>5m</delay>
                     <history>3d</history>
                     <trends>90d</trends>
                     <applications>
                        <application>
                           <name>RabbitMQ</name>
                        </application>
                     </applications>
                     <request_method>POST</request_method>
                     <trigger_prototypes>
                        <trigger_prototype>
                           <expression>{last()}&gt;=25 and {last()}&lt;100</expression>
                           <name>RabbitMQ queue count on {#NODENAME} ({#VHOSTNAME}) &gt;= 25</name>
                           <priority>AVERAGE</priority>
                        </trigger_prototype>
                        <trigger_prototype>
                           <expression>{last()}&gt;=100 and {last()}&lt;250</expression>
                           <name>RabbitMQ queue count on {#NODENAME} ({#VHOSTNAME}) &gt;= 100</name>
                           <priority>HIGH</priority>
                        </trigger_prototype>
                        <trigger_prototype>
                           <expression>{last()}&gt;=250</expression>
                           <name>RabbitMQ queue count on {#NODENAME} ({#VHOSTNAME}) &gt;= 250</name>
                           <priority>DISASTER</priority>
                        </trigger_prototype>
                     </trigger_prototypes>
                  </item_prototype>
                  <item_prototype>
                     <name>RabbitMQ $3 $4 $1 ($2)</name>
                     <type>ZABBIX_ACTIVE</type>
                     <key>rabbitmq[{#NODENAME},{#VHOSTNAME},queue_msg_ready,{#QUEUENAME}]</key>
                     <delay>5m</delay>
                     <history>3d</history>
                     <trends>90d</trends>
                     <applications>
                        <application>
                           <name>RabbitMQ</name>
                        </application>
                     </applications>
                     <request_method>POST</request_method>
                  </item_prototype>
                  <item_prototype>
                     <name>RabbitMQ $3 $4 $1 ($2)</name>
                     <type>ZABBIX_ACTIVE</type>
                     <key>rabbitmq[{#NODENAME},{#VHOSTNAME},queue_msg_unackd,{#QUEUENAME}]</key>
                     <delay>5m</delay>
                     <history>3d</history>
                     <trends>90d</trends>
                     <applications>
                        <application>
                           <name>RabbitMQ</name>
                        </application>
                     </applications>
                     <request_method>POST</request_method>
                  </item_prototype>
               </item_prototypes>
               <graph_prototypes>
                  <graph_prototype>
                     <name>RabbitMQ Queue activity {#QUEUENAME} {#NODENAME} ({#VHOSTNAME})</name>
                     <graph_items>
                        <graph_item>
                           <color>00C800</color>
                           <item>
                              <host>Template App Rabbitmq-Server</host>
                              <key>rabbitmq[{#NODENAME},{#VHOSTNAME},queue_consumers,{#QUEUENAME}]</key>
                           </item>
                        </graph_item>
                        <graph_item>
                           <sortorder>1</sortorder>
                           <color>0000C8</color>
                           <item>
                              <host>Template App Rabbitmq-Server</host>
                              <key>rabbitmq[{#NODENAME},{#VHOSTNAME},queue_msgs,{#QUEUENAME}]</key>
                           </item>
                        </graph_item>
                        <graph_item>
                           <sortorder>2</sortorder>
                           <color>C800C8</color>
                           <item>
                              <host>Template App Rabbitmq-Server</host>
                              <key>rabbitmq[{#NODENAME},{#VHOSTNAME},queue_msg_ready,{#QUEUENAME}]</key>
                           </item>
                        </graph_item>
                        <graph_item>
                           <sortorder>3</sortorder>
                           <color>00C8C8</color>
                           <item>
                              <host>Template App Rabbitmq-Server</host>
                              <key>rabbitmq[{#NODENAME},{#VHOSTNAME},queue_msg_unackd,{#QUEUENAME}]</key>
                           </item>
                        </graph_item>
                     </graph_items>
                  </graph_prototype>
                  <graph_prototype>
                     <name>RabbitMQ queue_memory {#QUEUENAME} {#NODENAME} ({#VHOSTNAME})</name>
                     <graph_items>
                        <graph_item>
                           <color>00C800</color>
                           <item>
                              <host>Template App Rabbitmq-Server</host>
                              <key>rabbitmq[{#NODENAME},{#VHOSTNAME},queue_memory,{#QUEUENAME}]</key>
                           </item>
                        </graph_item>
                     </graph_items>
                  </graph_prototype>
               </graph_prototypes>
               <request_method>POST</request_method>
            </discovery_rule>
         </discovery_rules>
         <screens>
            <screen>
               <name>RabbitMQ</name>
               <hsize>2</hsize>
               <vsize>3</vsize>
               <screen_items>
                  <screen_item>
                     <resourcetype>20</resourcetype>
                     <style>0</style>
                     <resource>
                        <name>RabbitMQ exchanges/queue count on {#NODENAME} ({#VHOSTNAME})</name>
                        <host>Template App Rabbitmq-Server</host>
                     </resource>
                     <width>500</width>
                     <height>100</height>
                     <x>0</x>
                     <y>0</y>
                     <colspan>1</colspan>
                     <rowspan>1</rowspan>
                     <elements>0</elements>
                     <valign>0</valign>
                     <halign>0</halign>
                     <dynamic>0</dynamic>
                     <sort_triggers>0</sort_triggers>
                     <url/>
                     <application/>
                     <max_columns>3</max_columns>
                  </screen_item>
                  <screen_item>
                     <resourcetype>20</resourcetype>
                     <style>0</style>
                     <resource>
                        <name>RabbitMQ queue_memory {#QUEUENAME} {#NODENAME} ({#VHOSTNAME})</name>
                        <host>Template App Rabbitmq-Server</host>
                     </resource>
                     <width>500</width>
                     <height>100</height>
                     <x>0</x>
                     <y>1</y>
                     <colspan>1</colspan>
                     <rowspan>1</rowspan>
                     <elements>0</elements>
                     <valign>0</valign>
                     <halign>0</halign>
                     <dynamic>0</dynamic>
                     <sort_triggers>0</sort_triggers>
                     <url/>
                     <application/>
                     <max_columns>3</max_columns>
                  </screen_item>
                  <screen_item>
                     <resourcetype>20</resourcetype>
                     <style>0</style>
                     <resource>
                        <name>RabbitMQ Queue activity {#QUEUENAME} {#NODENAME} ({#VHOSTNAME})</name>
                        <host>Template App Rabbitmq-Server</host>
                     </resource>
                     <width>500</width>
                     <height>100</height>
                     <x>0</x>
                     <y>2</y>
                     <colspan>1</colspan>
                     <rowspan>1</rowspan>
                     <elements>0</elements>
                     <valign>0</valign>
                     <halign>0</halign>
                     <dynamic>0</dynamic>
                     <sort_triggers>0</sort_triggers>
                     <url/>
                     <application/>
                     <max_columns>3</max_columns>
                  </screen_item>
               </screen_items>
            </screen>
         </screens>
      </template>
   </templates>
</zabbix_export>
